{% extends 'base.html' %}

{% block title %}Edit Order{% endblock %}

{% block content %}
    <h1>Edit Order</h1>
    <a href="{% url 'order_detail' pk=order.id %}" class="btn btn-secondary mb-3">Back to Order Details</a>

    <form method="post">
        {% if form.errors %}
            <div class="alert alert-danger">
                Please correct the errors below.
            </div>
        {% endif %}

        <div class="form-group">
            <label for="{{ form.table_number.id_for_label }}">Table Number:</label>
            {{ form.table_number }}
            {% if form.table_number.errors %}
                <div class="invalid-feedback d-block">
                    {% for error in form.table_number.errors %}
                        {{ error }}
                    {% endfor %}
                </div>
            {% endif %}
        </div>

        <div class="form-group">
            <label for="{{ form.dishes.id_for_label }}">Dishes (JSON):</label>
            {{ form.dishes }}
            {% if form.dishes.errors %}
                <div class="invalid-feedback d-block">
                    {% for error in form.dishes.errors %}
                        {{ error }}
                    {% endfor %}
                </div>
            {% endif %}
            <small class="form-text text-muted">Enter a JSON list of dishes, e.g., <code>[{"dish_name": "Soup", "price": 10}, {"dish_name": "Salad", "price": 8}]</code></small>
        </div>
        <div class="form-group">
            <label for="{{ form.status_order.id_for_label }}">Status Order:</label>
            {{ form.status_order }}
            {% if form.status_order.errors %}
                <div class="invalid-feedback d-block">
                    {% for error in form.status_order.errors %}
                        {{ error }}
                    {% endfor %}
                </div>
            {% endif %}
        </div>
        <button type="submit" class="btn btn-primary">Update Order</button>
    </form>
{% endblock %}